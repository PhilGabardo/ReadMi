!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/build/",n(n.s="cf3o")}({"5tIq":function(t,e,n){"use strict";n.r(e),e.default={getAudioContext:function(){return window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.oAudioContext||window.msAudioContext,new AudioContext}}},"756C":function(t,e){t.exports={add:function(t,e){return[t[0]+e[0],t[1]+e[1]]},subtract:function(t,e){return[t[0]-e[0],t[1]-e[1]]},multiply:function(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]},magnitude:function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}}},A5kO:function(t,e,n){t.exports={fft:n("RAZa").fft,ifft:n("z0JX").ifft,fftInPlace:n("RAZa").fftInPlace,util:n("kmYd"),dft:n("fCvD"),idft:n("hTjx")}},RAZa:function(t,e,n){var r=n("756C"),o=n("kmYd"),i=n("pIo5");t.exports={fft:function t(e){var n=[],i=e.length;if(1==i)return Array.isArray(e[0])?[[e[0][0],e[0][1]]]:[[e[0],0]];for(var u=t(e.filter((function(t,e){return e%2==0}))),a=t(e.filter((function(t,e){return e%2==1}))),f=0;f<i/2;f++){var c=u[f],s=r.multiply(o.exponent(f,i),a[f]);n[f]=r.add(c,s),n[f+i/2]=r.subtract(c,s)}return n},fftInPlace:function(t){for(var e=t.length,n=i.countTrailingZeros(e),u=0;u<e;u++){var a=i.reverse(u)>>>i.INT_BITS-n;if(a>u){var f=[t[u],0];t[u]=t[a],t[a]=f}else t[a]=[t[a],0]}for(var c=2;c<=e;c+=c)for(var s=0;s<c/2;s++)for(var l=o.exponent(s,c),p=0;p<e/c;p++){var h=r.multiply(l,t[p*c+s+c/2]);t[p*c+s+c/2]=r.subtract(t[p*c+s],h),t[p*c+s]=r.add(t[p*c+s],h)}}}},cf3o:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return f}));var r=n("eolz"),o=n("sEk6"),i=n("hg4W"),u=n("5tIq");function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.audioCtx=u.default.getAudioContext(),this.tick=null,this.tickVolume=null,this.soundHz=1e3,this.scheduledNotes=e.flat(),this.instrument=n,this.initAudio()}var e,n,f;return e=t,(n=[{key:"initAudio",value:function(){this.tick=this.audioCtx.createOscillator(),this.tickVolume=this.audioCtx.createGain(),this.tick.type="square",this.tick.frequency.value=this.soundHz,this.tickVolume.gain.value=0,this.tick.connect(this.tickVolume),this.tick.start(0)}},{key:"start",value:function(){for(var t=this.audioCtx.currentTime,e=0;e<this.scheduledNotes.length;e++){var n=this.scheduledNotes[e].note;if("GhostNote"!==n.attrs.type&&!n.isRest()){var u=n.getKeyProps()[0],a=u.key,f=u.octave,c=i.default.getOffsetNote(a,f,0-o.default.getInstrumentKeyOffset(this.instrument)),s=r.default.getFrequencyForNote(c.name,c.octave);this.playNoteAtTime(s,t+this.scheduledNotes[e].time_offset)}}}},{key:"playNoteAtTime",value:function(t,e){this.tick.frequency.cancelScheduledValues(e),this.tick.frequency.setValueAtTime(t,e),this.tickVolume.gain.cancelScheduledValues(e),this.tickVolume.gain.setValueAtTime(0,e),this.tickVolume.gain.linearRampToValueAtTime(1,e+.001),this.tickVolume.gain.linearRampToValueAtTime(0,e+.001+.2)}},{key:"stop",value:function(){this.tickVolume.gain.value=0}},{key:"pause",value:function(){this.audioCtx.suspend()}},{key:"resume",value:function(){this.audioCtx.resume()}},{key:"setController",value:function(){var t=this;document.getElementById("song-player-controller").addEventListener("change",(function(e){e.target.checked?t.tickVolume.connect(t.audioCtx.destination):t.tickVolume.disconnect(t.audioCtx.destination)}))}}])&&a(e.prototype,n),f&&a(e,f),t}()},eolz:function(t,e,n){"use strict";n.r(e);var r=n("r1bH"),o=n("A5kO"),i=n.n(o),u=[7902.13,7458.62,7040,6644.88,6271.93,5919.91,5587.65,5274.04,4978.03,4698.64,4434.92,4186.01,3951.07,3729.31,3520,3322.44,3135.96,2959.96,2793.83,2637.02,2489.02,2349.32,2217.46,2093,1975.53,1864.66,1760,1661.22,1567.98,1479.98,1396.91,1318.51,1244.51,1174.66,1108.73,1046.5,987.767,932.328,880,830.609,783.991,739.989,698.456,659.255,622.254,587.33,554.365,523.251,493.883,466.164,440,415.305,391.995,369.994,349.228,329.628,311.127,293.665,277.183,261.626,246.942,233.082,220,207.652,195.998,184.997,174.614,164.814,155.563,146.832,138.591,130.813,123.471,116.541,110,103.826,97.9989,92.4986,87.3071,82.4069,77.7817,73.4162,69.2957,65.4064,61.7354,58.2705,55,51.9131,48.9994,46.2493,43.6535,41.2034,38.8909,36.7081,34.6478,32.7032,30.8677,29.1352,27.5,25.9565,24.4997,23.1247,21.8268,20.6017,19.4454,18.354,17.3239,16.3516],a=["B","A#","A","G#","G","F#","F","E","D#","D","C#","C"],f={C:0,"C#":1,DB:1,D:2,"D#":3,EB:3,E:4,F:5,"F#":6,GB:6,G:7,"G#":8,AB:8,A:9,"A#":10,BB:10,B:11};function c(t){for(var e=u.length,n=0,r=0;r<e-1;r++){if(0==r&&t>u[r]){n=0,0;break}if(u[r]>=t&&t>u[r+1]){(n=u[r]-t<t-u[r+1]?r:r+1)==r?r+1:r;break}r==e-2&&(n=e-1,e-1)}return{key:a[n%a.length],octave:8-Math.floor(n/a.length)}}e.default={getFrequencyForNote:function(t,e){for(var n,o=0;o<a.length;o++)if(r.default.compareKeys(t,a[o])){n=o;break}return u[u.length-1-e*a.length-(a.length-n-1)]},getNoteFromSamples:function(t,e,n){var r=function(t,e,n){Math.floor(e/n);var r=function(t){for(var e=i.a.fft(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=[e[r][0]*e[r][0],-1*e[r][1]*e[r][1]];e=i.a.ifft(n);for(var o=new Array(t.length),u=0;u<o.length;u++)o[u]=2*e[0][1]-2*e[u][1];return o}(t),o=function(t){var e,n=t.length;for(e=0;e<n;e++)if(t[e]<.45){for(;e+1<n&&t[e+1]<t[e];)e++;break}return e=e>=n-1?-1:e}(r=function(t){var e=t.length,n=0;t[0]=1;for(var r=1;r<e;r++)n+=t[r],t[r]=t[r]*r/n;return t}(r));return-1==o?o:e/(o=function(t,e){var n,r=t<1?t:t-1,o=t+1<e.length?t+1:t;if(r==t)n=e[t]<=e[o]?t:o;else if(o==t)n=e[t]<=e[r]?t:r;else{var i=e[r],u=e[t],a=e[o];n=t+(a-i)/(2*(2*u-a-i))}return n}(o,r))}(t,e,n);return r?c(r):[]},estimateNote:c,getIndexForNote:function(t,e){return 12*e+f[t]},getGuitarStringFretsMap:function(){for(var t=[],e=0;e<6;e++){var n=0;n=e>=4?5*e-1:5*e;for(var r=0;r<22;r++)t[r+n]||(t[r+n]=[]),t[r+n].push([e,r])}return t},getViolinStringFretsMap:function(){for(var t=[],e=0;e<4;e++){var n;n=7*e;for(var r=0;r<8;r++)t[r+n]||(t[r+n]=[]),t[r+n].push([e,r])}return t}}},fCvD:function(t,e,n){var r=n("756C"),o=n("kmYd");t.exports=function(t){for(var e=[],n=t.length,i=0;i<n;i++){e[i]=[0,0];for(var u=0;u<n;u++){var a,f=o.exponent(i*u,n);a=Array.isArray(t[u])?r.multiply(t[u],f):r.multiply([t[u],0],f),e[i]=r.add(e[i],a)}}return e}},hTjx:function(t,e,n){var r=n("fCvD");t.exports=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=[t[n][1],t[n][0]];for(var o=r(e),i=[],u=0;u<o.length;u++)i[u]=[o[u][1]/o.length,o[u][0]/o.length];return i}},hg4W:function(t,e,n){"use strict";n.r(e);var r=n("r1bH");function o(t){return{"C major":{type:"#",notes:{}},"A minor":{type:"#",notes:{}},"G major":{type:"#",notes:{F:!0}},"E minor":{type:"#",notes:{F:!0}},"D major":{type:"#",notes:{F:!0,C:!0}},"B minor":{type:"#",notes:{F:!0,C:!0}},"A major":{type:"#",notes:{F:!0,C:!0,G:!0}},"F# minor":{type:"#",notes:{F:!0,C:!0,G:!0}},"E major":{type:"#",notes:{F:!0,C:!0,G:!0,D:!0}},"B major":{type:"#",notes:{F:!0,C:!0,G:!0,D:!0,A:!0}},"F# major":{type:"#",notes:{F:!0,G:!0,A:!0,C:!0,D:!0,E:!0}},"C# major":{type:"#",notes:{F:!0,G:!0,A:!0,C:!0,D:!0,E:!0,B:!0}},"F major":{type:"b",notes:{B:!0}},"D minor":{type:"b",notes:{B:!0}},"Bb major":{type:"b",notes:{B:!0,E:!0}},"G minor":{type:"b",notes:{B:!0,E:!0}},"Eb major":{type:"b",notes:{B:!0,E:!0,A:!0}},"C minor":{type:"b",notes:{B:!0,E:!0,A:!0}},"Ab major":{type:"b",notes:{B:!0,E:!0,A:!0,D:!0}},"F minor":{type:"b",notes:{B:!0,E:!0,A:!0,D:!0}},"Db major":{type:"b",notes:{B:!0,E:!0,A:!0,D:!0,G:!0}},"Bb minor":{type:"b",notes:{B:!0,E:!0,A:!0,D:!0,G:!0}},"Gb major":{type:"b",notes:{B:!0,E:!0,A:!0,D:!0,G:!0,C:!0}},"Eb minor":{type:"b",notes:{B:!0,E:!0,A:!0,D:!0,G:!0,C:!0}},"Cb major":{type:"b",notes:{B:!0,E:!0,A:!0,D:!0,G:!0,C:!0,F:!0}},"Ab minor":{type:"b",notes:{B:!0,E:!0,A:!0,D:!0,G:!0,C:!0,F:!0}}}[t]}e.default={getKeySignatureInfo:o,getOffsetNote:function(t,e,n){for(var o=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],i=0,u=0;u<o.length;u++)if(r.default.compareKeys(o[u],t)){i=u;break}return{name:o[(o.length+i+n)%o.length],octave:e+Math.floor((i+n)/o.length)}},getKeySignatureStaffWidth:function(t){var e=o(t);return 300+10*Object.keys(e.notes).length}}},kmYd:function(t,e,n){var r=n("756C"),o={};t.exports={fftMag:function(t){var e=t.map(r.magnitude);return e.slice(0,e.length/2)},fftFreq:function(t,e){var n=e/t.length;return t.slice(0,t.length/2).map((function(t,e){return e*n}))},exponent:function(t,e){var n=-2*Math.PI*(t/e);return o[e]=o[e]||{},o[e][t]=o[e][t]||[Math.cos(n),Math.sin(n)],o[e][t]}}},pIo5:function(t,e,n){"use strict";function r(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-1<<31,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,n;return e=(t>65535)<<4,e|=n=((t>>>=e)>255)<<3,e|=n=((t>>>=n)>15)<<2,(e|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},e.countTrailingZeros=r,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var o=new Array(256);!function(t){for(var e=0;e<256;++e){var n=e,r=e,o=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--o;t[e]=r<<o&255}}(o),e.reverse=function(t){return o[255&t]<<24|o[t>>>8&255]<<16|o[t>>>16&255]<<8|o[t>>>24&255]},e.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},e.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},e.interleave3=function(t,e,n){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},e.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>r(t)+1}},r1bH:function(t,e,n){"use strict";n.r(e),e.default={compareKeys:function(t,e){return null!=t&&null!=e&&(t.toLowerCase()==e.toLowerCase()||{ab:"g#",a:"a","a#":"bb",bb:"a#",b:"cb","b#":"c",cb:"b",c:"b#","c#":"db",db:"c#",d:"d","d#":"eb",eb:"d#",e:"fb","e#":"f",fb:"e",f:"f","f#":"gb",gb:"f#",g:"g","g#":"ab"}[t.toLowerCase()]==e.toLowerCase())}}},sEk6:function(t,e,n){"use strict";n.r(e),e.default={getInstrumentKeyOffset:function(t){return{guitar:12,clarinet:2,bass_clarinet:14,soprano_saxophone:2,alto_saxophone:9,tenor_saxophone:14,french_horn:7,trumpet:2,piano:0,singing:0,violin:0}[t]},getInstrumentFingering:function(t){return{guitar:"guitar",piccolo:"picolo",clarinet:"clarinet",bass_clarinet:"clarinet",soprano_saxophone:"saxophone",alto_saxophone:"saxophone",tenor_saxophone:"saxophone",baritone_saxophone:"saxophone",french_horn:"trumpet",trumpet:"trumpet",xylophone:"xylophone",glockenspiel:"glockenspiel",piano:"piano"}[t]}}},z0JX:function(t,e,n){var r=n("RAZa").fft;t.exports={ifft:function(t){for(var e=[],n=0;n<t.length;n++)e[n]=[t[n][1],t[n][0]];for(var o=r(e),i=[],u=0;u<o.length;u++)i[u]=[o[u][1]/o.length,o[u][0]/o.length];return i}}}});