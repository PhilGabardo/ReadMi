!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/build/",n(n.s="9mlC")}({"0V1R":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,"default",(function(){return a}));var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ctx=t.getContext("2d"),this.width=t.width,this.height=t.height}var t,n,a;return t=e,(n=[{key:"init",value:function(){for(var e=0;e<52;e++)this.drawWhiteKey(e,!1);this.drawBlackKey(0,!1);for(var t=2,n=0;n<7;n++)for(var r=0;r<5;r++)this.drawBlackKey(t,!1),t+=1==r||4==r?2:1}},{key:"drawRectWithBorder",value:function(e,t,n,r,a,i){this.ctx.fillStyle=a,this.ctx.fillRect(e,t,n,r),this.ctx.fillStyle=i,this.ctx.fillRect(e+1,t+1,n-2,r-2)}},{key:"drawBlackKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){var n="rgb(0,0,0)",r="rgb(255,0,0)";this.drawRectWithBorder((e+1)*(this.width/52)-this.width/52*.75/2,0,this.width/52*.75,.66*this.height,n,r)}else{var a="rgb(0,0,0)",i="rgb(50,50,50)";this.drawRectWithBorder((e+1)*(this.width/52)-this.width/52*.75/2,0,this.width/52*.75,.66*this.height,a,i)}}},{key:"drawWhiteKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){var n="rgb(0,0,0)",r="rgb(255,0,0)";this.drawRectWithBorder(e*(this.width/52),0,this.width/52,this.height,n,r)}else{var a="rgb(0,0,0)",i="rgb(255,255,255)";this.drawRectWithBorder(e*(this.width/52),0,this.width/52,this.height,a,i)}}},{key:"drawRedKey",value:function(e,t){var n=this.absoluteToKeyInfo(e-1),r=this.absoluteToKeyInfo(e+1),a=(this.absoluteToKeyInfo(e+1),this.absoluteToKeyInfo(e));a.is_black?(n.is_black&&this.drawBlackKey(n.white_index,!1),r.is_black&&this.drawBlackKey(r.white_index,!1),this.drawBlackKey(a.white_index,!t)):(this.drawWhiteKey(a.white_index,!t),n.is_black&&this.drawBlackKey(n.white_index,!1),r.is_black&&this.drawBlackKey(r.white_index,!1))}},{key:"undoDrawRedKey",value:function(e){this._undoDrawRedKey(e-1),this._undoDrawRedKey(e),this._undoDrawRedKey(e+1)}},{key:"_undoDrawRedKey",value:function(e){var t=this.absoluteToKeyInfo(e);t.is_black?this.drawBlackKey(t.white_index,!1):this.drawWhiteKey(t.white_index,!1)}},{key:"absoluteToKeyInfo",value:function(e){var t=new Array(88);t[0]={is_black:!1,white_index:0},t[1]={is_black:!0,white_index:0},t[2]={is_black:!1,white_index:1};for(var n=3,r=0;r<8;r++){var a=7*r;t[n+0]={is_black:!1,white_index:a+2},t[n+1]={is_black:!0,white_index:a+2},t[n+2]={is_black:!1,white_index:a+3},t[n+3]={is_black:!0,white_index:a+3},t[n+4]={is_black:!1,white_index:a+4},t[n+5]={is_black:!1,white_index:a+5},t[n+6]={is_black:!0,white_index:a+5},t[n+7]={is_black:!1,white_index:a+6},t[n+8]={is_black:!0,white_index:a+6},t[n+9]={is_black:!1,white_index:a+7},t[n+10]={is_black:!0,white_index:a+7},t[n+11]={is_black:!1,white_index:a+8},n+=12}return t[e]}}])&&r(t.prototype,n),a&&r(t,a),e}()},"9mlC":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));n("sEk6");var r=n("0V1R"),a=n("eolz"),i=n("GR20");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=document.getElementById("canvas"),this.canvas.style.display="block";var i=document.getElementById("boo");this.canvas.style.left=i.offsetWidth/2-this.canvas.offsetWidth/2+"px",this.draw_keyboard=new r.default(canvas),this.draw_keyboard.init(),this.beats_per_minute=t,this.beats_per_measure=n,this.vf_bars=a}var t,n,s;return t=e,(n=[{key:"start",value:function(){this.func=setInterval(this.draw,10,this)}},{key:"pause",value:function(){window.clearInterval(this.func)}},{key:"draw",value:function(e){var t=i.default.getTimeSinceStart()*(e.beats_per_minute/60)/1e3,n=Math.floor(t/e.beats_per_measure),r=t%e.beats_per_measure/e.beats_per_measure,o=e.beats_per_minute/e.beats_per_measure/20*.08,s=r-e.beats_per_minute/e.beats_per_measure/20*.04,u=n;r-o<0&&(0===n?u=0:(u-=1,s+=1));var l=null;if(e.vf_bars[u][0]&&e.vf_bars[u][0].percentage<s&&(l=e.vf_bars[u][0].note,e.vf_bars[u].shift()),l&&"GhostNote"!==l.attrs.type){var c=l.getKeyProps()[0],h=c.key,f=c.octave,d=a.default.getIndexForNote(h,f);e.draw_keyboard.drawRedKey(d-9,!0),e.hintNextNote(u)}}},{key:"hintNextNote",value:function(e){for(var t=e;t<this.vf_bars.length;t++)for(var n=0;n<this.vf_bars[t].length;n++){var r=this.vf_bars[t][n].note;if("GhostNote"!==r.attrs.type){var i=r.getKeyProps()[0],o=i.key,s=i.octave,u=a.default.getIndexForNote(o,s);return console.log(u),void this.draw_keyboard.drawRedKey(u-9,!1)}}}},{key:"resume",value:function(){this.start()}},{key:"stop",value:function(){this.canvas.style.display="none"}}])&&o(t.prototype,n),s&&o(t,s),e}()},GR20:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,"default",(function(){return a}));var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"startTiming",value:function(){e.startTime=Date.now(),e.pauseDelay=0}},{key:"pause",value:function(){e.pauseStart=Date.now()}},{key:"resume",value:function(){e.pauseDelay+=Date.now()-e.pauseStart}},{key:"getPauseDelay",value:function(){return e.pauseDelay}},{key:"getTimeSinceStart",value:function(){return Date.now()-e.startTime-this.pauseDelay}}],(n=null)&&r(t.prototype,n),a&&r(t,a),e}()},eolz:function(e,t,n){"use strict";n.r(t);var r=n("r1bH"),a=[7902.13,7458.62,7040,6644.88,6271.93,5919.91,5587.65,5274.04,4978.03,4698.64,4434.92,4186.01,3951.07,3729.31,3520,3322.44,3135.96,2959.96,2793.83,2637.02,2489.02,2349.32,2217.46,2093,1975.53,1864.66,1760,1661.22,1567.98,1479.98,1396.91,1318.51,1244.51,1174.66,1108.73,1046.5,987.767,932.328,880,830.609,783.991,739.989,698.456,659.255,622.254,587.33,554.365,523.251,493.883,466.164,440,415.305,391.995,369.994,349.228,329.628,311.127,293.665,277.183,261.626,246.942,233.082,220,207.652,195.998,184.997,174.614,164.814,155.563,146.832,138.591,130.813,123.471,116.541,110,103.826,97.9989,92.4986,87.3071,82.4069,77.7817,73.4162,69.2957,65.4064,61.7354,58.2705,55,51.9131,48.9994,46.2493,43.6535,41.2034,38.8909,36.7081,34.6478,32.7032,30.8677,29.1352,27.5,25.9565,24.4997,23.1247,21.8268,20.6017,19.4454,18.354,17.3239,16.3516],i=["B","A#","A","G#","G","F#","F","E","D#","D","C#","C"],o={C:0,"C#":1,DB:1,D:2,"D#":3,EB:3,E:4,F:5,"F#":6,GB:6,G:7,"G#":8,AB:8,A:9,"A#":10,BB:10,B:11};function s(e){for(var t=a.length,n=0,r=0;r<t-1;r++){if(0==r&&e>a[r]){n=0,0;break}if(a[r]>=e&&e>a[r+1]){(n=a[r]-e<e-a[r+1]?r:r+1)==r?r+1:r;break}r==t-2&&(n=t-1,t-1)}return{key:i[n%i.length],octave:8-Math.floor(n/i.length)}}t.default={getFrequencyForNote:function(e,t){for(var n,o=0;o<i.length;o++)if(r.default.compareKeys(e,i[o])){n=o;break}return a[a.length-1-t*i.length-(i.length-n-1)]},getNoteFromSamples:function(e,t){for(var n=0,r=-1,a=8;a<=1e3;a++){for(var i=0,o=0;o<1024;o++)i+=(e[o]-128)/128*((e[o+a]-128)/128);var u=i/(1024+a);if(u>n&&(n=u,r=a),u>.9)break}return n>.0025?s(t/r):[]},estimateNote:s,getIndexForNote:function(e,t){return console.log(e),12*t+o[e]}}},r1bH:function(e,t,n){"use strict";n.r(t),t.default={compareKeys:function(e,t){return null!=e&&null!=t&&(e.toLowerCase()==t.toLowerCase()||{ab:"g#",a:"a","a#":"bb",bb:"a#",b:"cb","b#":"c",cb:"b",c:"b#","c#":"db",db:"c#",d:"d","d#":"eb",eb:"d#",e:"fb","e#":"f",fb:"e",f:"f","f#":"gb",gb:"f#",g:"g","g#":"ab"}[e.toLowerCase()]==t.toLowerCase())}}},sEk6:function(e,t,n){"use strict";n.r(t),t.default={getInstrumentKeyOffset:function(e){return{guitar:12,clarinet:2,bass_clarinet:14,soprano_saxophone:2,alto_saxophone:9,tenor_saxophone:14,french_horn:7,trumpet:2,piano:0}[e]},getInstrumentFingering:function(e){return{guitar:"guitar",piccolo:"picolo",clarinet:"clarinet",bass_clarinet:"clarinet",soprano_saxophone:"saxophone",alto_saxophone:"saxophone",tenor_saxophone:"saxophone",baritone_saxophone:"saxophone",french_horn:"trumpet",trumpet:"trumpet",xylophone:"xylophone",glockenspiel:"glockenspiel",piano:"piano"}[e]}}}});